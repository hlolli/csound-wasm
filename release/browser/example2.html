<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <h5>Click Start realtime once, gotta love chrome's new autoplay ban policy</h5>
    <button id="start">Start realtime</button>
    <button onclick="csound.inputMessage('i 1 0 1')">Make beep!</button>
    <script src="./csound-wasm-browser.js"></script>
  <script>
    const csdText = `
    <CsoundSynthesizer>
                <CsOptions>
                </CsOptions>
                <CsInstruments>
                
                sr = 44100
                ksmps = 128
                nchnls = 2
                0dbfs = 1
                
                instr 1
                
                kcps = 110
                ifn  = 1
                
                knh	line p4, p3, p5
                kArr[] fillarray 1, 2, 3, 4, 5, 666
                chnset kArr, "someData"
                asig	buzz 0.1, kcps, knh, ifn
                    outs asig, asig
                endin
                
                </CsInstruments>
                <CsScore>
                
                ;sine wave.
                f 1 0 16384 10 1
                
                i 1 0 3 20 20
                i 1 + 3 3 3
                i 1 + 3 10 1
                e
                
                </CsScore>
                </CsoundSynthesizer>
    `
    document.getElementById('start').onclick = ()=> {
        csound.playCsd(csdText);
        
    };

    csound.on('performKsmps', () => {console.log(csound.getControlChannel('someData'))});
    csound.on('started', (e) => console.log(csound.getTable(1)));
    
    csound.on('log', (log) => {console.log('yet even better way of logging', log)});
  </script>
</body>
</html>
